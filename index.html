<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vite+Ai (Gemini API)</title>
  <link rel="shortcut icon" href="/gemini.svg" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <main>
    <div class="header">
      <h1>Vite+Ai (Gemini API)</h1>       
      <div class="file-input-wrapper">
        <label for="image-upload">
          <img src="/gemini.svg" alt="gemni" width="20"><small>upload</small>
        </label>
        <input type="file" id="image-upload" accept="image/*">
      </div>
    </div>

    <form>
      <div class="image-picker" id="custom-image-container">
        <!-- Predefined Images -->
        <span>
          <label class="image-choice">
            <input type="radio" name="chosen-image" value="/baked_goods_3.jpg">
            <img src="/baked_goods_3.jpg">
          </label>
        </span>
        <span>
          <label class="image-choice">
            <input type="radio" name="chosen-image" value="/gemni.jpg">
            <img src="/gemni.jpg">
          </label>
        </span>
        <span>
          <label class="image-choice">
            <input type="radio" name="chosen-image" value="/pain_killer.jpeg">
            <img src="/pain_killer.jpeg">
          </label>
        </span>
      </div>

      <p class="output">(Results will appear here)</p>
      <div class="prompt-box">
        <label>
          <textarea name="prompt" placeholder="Enter instructions here"></textarea>
        </label>
        <div><button type="submit">➡</button></div>
      </div>
    </form>

    <div style="text-align: center;"><small>2024 &copy; AR</small></div>
  </main>

  <script type="module" src="/main.js"></script>

  <!-- Image Upload and Handling Script -->
  <script>
    const imageInput = document.querySelector('#image-upload');
    const customImageContainer = document.querySelector('#custom-image-container');

    imageInput.addEventListener('change', (event) => {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();

        reader.onloadend = () => {
          const newImageWrapper = document.createElement('span');
          const newRadioLabel = document.createElement('label');
          newRadioLabel.classList.add('image-choice');

          const newRadioInput = document.createElement('input');
          newRadioInput.type = 'radio';
          newRadioInput.name = 'chosen-image';
          newRadioInput.value = reader.result;
          newRadioInput.checked = true;

          const newImage = document.createElement('img');
          newImage.src = reader.result;

          const deleteIcon = document.createElement('span');
          deleteIcon.textContent = '✕';
          deleteIcon.classList.add('delete-icon');
          deleteIcon.style.position = 'absolute';
          deleteIcon.style.top = '4px';
          deleteIcon.style.right = '4px';
          deleteIcon.style.cursor = 'pointer';
          deleteIcon.style.color = 'red';
          deleteIcon.style.fontWeight = 'bold';

          deleteIcon.addEventListener('click', () => newImageWrapper.remove());

          newRadioLabel.addEventListener('dblclick', () => {
            if (newRadioInput.checked) {
              newRadioInput.checked = false;
            }
          });

          newRadioLabel.appendChild(newRadioInput);
          newRadioLabel.appendChild(newImage);
          newRadioLabel.appendChild(deleteIcon);
          newImageWrapper.appendChild(newRadioLabel);
          customImageContainer.appendChild(newImageWrapper);
        };

        reader.readAsDataURL(file);
      }
    });

    document.querySelectorAll('.image-choice').forEach(label => {
      label.addEventListener('dblclick', () => {
        const radio = label.querySelector('input[type="radio"]');
        if (radio && radio.checked) {
          radio.checked = false;
        }
      });
    });

    const textarea = document.querySelector('textarea');

textarea.addEventListener('input', () => {
  textarea.style.height = 'auto'; // Reset height to auto to calculate new height
  textarea.style.height = `${textarea.scrollHeight}px`; // Set new height based on content
});

  </script>
</body>
</html>
